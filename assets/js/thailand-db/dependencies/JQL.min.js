 /**
 * @name JQL.js
 * @version 1.0.2
 * @update Apr 8, 2017
 * @author Earthchie http://www.earthchie.com/
 * @license WTFPL v.2 - http://www.wtfpl.net/
 **/
function JQL(a){"string"==typeof a&&(a=JSON.parse(a)),this.data_source=a,this.buffer=a,this.focused_field="",this.options=[],this.size=!1;for(var b in a){for(var c in a[b])this.options.push(c);break}this.fetch=function(){if("object"==typeof this.options){var a={};for(var b in this.buffer){a[b]={};for(var c in this.options){var d=this.options[c];this.buffer[b][d]&&(a[b][d]=this.buffer[b][d])}}this.buffer=a}if(this.size){var e=this.size.toString().split(","),f=0,g=this.size;e.length>1&&e[0]<e[1]&&(f=parseInt(e[0]),g=f+parseInt(e[1]));for(var h={},b=f;b<g&&this.buffer[b];b++)h[b]=this.buffer[b];this.buffer=h}return this.buffer},this.new=function(a){this.data_source=a,this.buffer=a},this.limit=function(a){return this.size=a,this},this.select=function(a){return this.options=a,"string"==typeof a&&"*"!==a&&(this.options=a.split(",")),this.buffer=this.data_source,this.size=!1,this},this.where=function(a){return this.focused_field=a,this},this.and=function(a){return this.where(a)},this.contains=function(a,b){var c=this.buffer;this.buffer=[];for(var d in c)b?~c[d][this.focused_field].indexOf(a)&&this.buffer.push(c[d]):~c[d][this.focused_field].toLowerCase().indexOf(a.toLowerCase())&&this.buffer.push(c[d]);return this},this.match=function(a,b){if("string"==typeof a&&""!==a){b=b||"ig",a=new RegExp(a,b);var c=this.buffer;this.buffer=[];for(var d in c)a.lastIndex=0,a.exec(c[d][this.focused_field])&&this.buffer.push(c[d])}return this},this.equalTo=function(a){var b=this.buffer;this.buffer=[];for(var c in b)b[c][this.focused_field]==a&&this.buffer.push(b[c]);return this},this.is=this.equalTo,this.in=function(a){var b=this.buffer;this.buffer=[];for(var c in b)this.in_array(b[c][this.focused_field],a)&&this.buffer.push(b[c]);return this},this.moreThan=function(a){var b=this.buffer;this.buffer=[];for(var c in b)parseFloat(b[c][this.focused_field])>parseFloat(a)&&this.buffer.push(b[c]);return this},this.moreThanOrEqualTo=function(a){var b=this.buffer;this.buffer=[];for(var c in b)parseFloat(b[c][this.focused_field])>=parseFloat(a)&&this.buffer.push(b[c]);return this},this.lessThan=function(a){var b=this.buffer;this.buffer=[];for(var c in b)parseFloat(b[c][this.focused_field])<parseFloat(a)&&this.buffer.push(b[c]);return this},this.lessThanOrEqualTo=function(a){var b=this.buffer;this.buffer=[];for(var c in b)parseFloat(b[c][this.focused_field])<=parseFloat(a)&&this.buffer.push(b[c]);return this},this.orderBy=function(a,b){var c="asc",d=a.split(" "),e=d.pop();e&&"desc"==e.toLowerCase()&&(c="desc",a=d.join(" "));var f=[];for(var g in this.buffer)f.push([g,this.buffer[g][a]]);b=void 0==b&&isNaN(f[0][1])?"string":"numeric","string"==b?f.sort(function(a,b){return a[1]<b[1]?-1:a[1]>b[1]?1:0}):f.sort(function(a,b){return a[1]-b[1]}),results=[];for(var g in f)results.push(this.buffer[f[g][0]]);return this.buffer=results,"desc"==c&&(this.buffer=this.buffer.reverse()),this},this.in_array=function(a,b){for(var c in b)if(a==b[c])return!0;return!1}}