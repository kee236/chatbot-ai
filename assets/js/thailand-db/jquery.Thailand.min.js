/**
 * @name jquery.Thailand.js
 * @version 1.2.0
 * @update Apr 10, 2017
 * @website https://github.com/earthchie/jquery.Thailand.js
 * @license WTFPL v.2 - http://www.wtfpl.net/
 *
 * @dependency: jQuery <https://jquery.com/>
 *              typehead.js <https://twitter.github.io/typeahead.js/>
 *              JQL.js <https://github.com/earthchie/JQL.js>
 **/
$.Thailand=function(e){"use strict";function t(e){function t(e){function t(e){var t=e.charCodeAt(0);return n[t<97?t-65:26+t-97]}return o?("number"==typeof e&&(e=a[e]),e.replace(/[A-Z]/gi,t)):e}var a=[],n=[],o=!1;if(e.lookup&&e.words&&(o=!0,a=e.lookup.split("|"),n=e.words.split("|"),e=e.data),!e[0].length)return e;var i=[];return e.forEach(function(e){var a=e[0];e[1].forEach(function(e){var n=e[0];e[1].forEach(function(e){var o=e[0];(e[1]instanceof Array?e[1]:[e[1]]).forEach(function(e){i.push({d:t(o),a:t(n),p:t(a),z:e})})})})}),i}e=$.extend({database:"./data3.json",autocomplete_size:20,onComplete:function(){},$district:$('[name="district"]'),$amphoe:$('[name="amphoe"]'),$province:$('[name="province"]'),$zipcode:$('[name="zipcode"]')},e),$.getJSON(e.database,function(a){var n=new JQL(t(a)),o={hint:!0,highlight:!0,minLength:0},i={empty:" ",suggestion:function(e){return"<div>"+e.d+" » "+e.a+" » "+e.p+" » "+(e.z||"<i>ไม่มีรหัสไปรษณีย์</i>")+"</div>"}},c=function(t,a){e.$district.val(a.d),e.$amphoe.val(a.a),e.$province.val(a.p),e.$zipcode.val(a.z)};e.$district.typeahead(o,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var a=[];try{a=n.select("*").where("d").match("^"+e).orderBy("d").fetch()}catch(e){}t(a)}}(),display:function(e){return e.d}}),e.$amphoe.typeahead(o,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var a=[];try{a=n.select("*").where("a").match("^"+e).orderBy("a").fetch()}catch(e){}t(a)}}(),display:function(e){return e.a}}),e.$province.typeahead(o,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var a=[];try{a=n.select("*").where("p").match("^"+e).orderBy("p").fetch()}catch(e){}t(a)}}(),display:function(e){return e.p}}),e.$zipcode.typeahead(o,{limit:e.autocomplete_size,templates:i,source:function(e){return function(e,t){var a=[];try{a=n.select("*").where("z").match("^"+e).orderBy("z").fetch()}catch(e){}t(a)}}(),display:function(e){return e.z}}),e.$district.bind("typeahead:select typeahead:autocomplete",c),e.$amphoe.bind("typeahead:select typeahead:autocomplete",c),e.$province.bind("typeahead:select typeahead:autocomplete",c),e.$zipcode.bind("typeahead:select typeahead:autocomplete",c),"function"==typeof e.onComplete&&e.onComplete()}).fail(function(t){throw new Error('Error: File "'+e.database+'" is not exists.')})};
